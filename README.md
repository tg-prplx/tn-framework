# üìú **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–≤–∏–∂–∫–∞**

## üìå **–û–ø–∏—Å–∞–Ω–∏–µ**
–î–∞–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è **—Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –Ω–æ–≤–µ–ª–ª –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ**, –∏—Å–ø–æ–ª—å–∑—É—è **Python + OpenCV + Lua**.  
–°—Ü–µ–Ω—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JSON**, –∞ –∏—Ö –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è **–Ω–∞ Lua**.

---

## üìå **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**
### üîπ **1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
–°–æ–∑–¥–∞–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–ø–æ –∂–µ–ª–∞–Ω–∏—é) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –ø–∞–∫–µ—Ç—ã:
```bash
pip install -r requirements.txt
```
–ï—Å–ª–∏ `requirements.txt` –Ω–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–∏ –≤—Ä—É—á–Ω—É—é:
```bash
pip install numpy opencv-python rich lupa
```

### üîπ **2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å Lua**
–î–≤–∏–∂–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **lupa**, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç **—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ Lua 5.4**.  
–ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ä—Å–∏—é:
```bash
lua -v
```
–ï—Å–ª–∏ Lua –Ω–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–∏:
```bash
sudo apt install lua5.4  # Ubuntu / Debian
sudo pacman -S lua       # Arch Linux
brew install lua         # macOS
```

---

## üìå **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**
```
/TNovellEngine
‚îÇ‚îÄ‚îÄ engine.py        # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –¥–≤–∏–∂–∫–∞
‚îÇ‚îÄ‚îÄ novell.py        # –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
‚îÇ‚îÄ‚îÄ requirements.txt  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ‚îÄ‚îÄ /scenes          # JSON-—Ñ–∞–π–ª—ã —Å—Ü–µ–Ω
‚îÇ‚îÄ‚îÄ /scripts         # Lua-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å—Ü–µ–Ω
‚îÇ‚îÄ‚îÄ /images          # –§–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ‚îÄ‚îÄ main.theme       # –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```

---

## üìå **–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω**
–°—Ü–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ **`scenes/`** –∏ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JSON**.

### üîπ **–ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω—ã (`scenes/scene1.json`)**
```json
{
    "id": 1,
    "text": "I'm gently opening the door.",
    "person": "You",
    "background": "images/nah.webp",
    "script": "scripts/scene1.lua"
}
```
### üîπ **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
| –ü–æ–ª–µ        | –¢–∏–ø   | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|------|---------|
| `id`        | int  | –ù–æ–º–µ—Ä —Å—Ü–µ–Ω—ã |
| `text`      | str  | –¢–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã |
| `person`    | str  | –ö—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç (–ø–µ—Ä—Å–æ–Ω–∞–∂) |
| `background`| str  | –§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–ø—É—Ç—å) |
| `script`    | str  | Lua-—Å–∫—Ä–∏–ø—Ç, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–π –≤ —ç—Ç–æ–π —Å—Ü–µ–Ω–µ |

‚ö° **–í—Å–µ —Å—Ü–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –ø–∞–ø–∫–µ `scenes/` –∏ –∏–º–µ–Ω–æ–≤–∞—Ç—å—Å—è `sceneX.json` (X ‚Äî –Ω–æ–º–µ—Ä —Å—Ü–µ–Ω—ã).**

---

## üìå **–õ–æ–≥–∏–∫–∞ —Å—Ü–µ–Ω (Lua)**
–ö–∞–∂–¥–∞—è —Å—Ü–µ–Ω–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å **Lua-—Å–∫—Ä–∏–ø—Ç**, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –µ—ë –ª–æ–≥–∏–∫–æ–π.  
–°–∫—Ä–∏–ø—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ **`scripts/`**.

### üîπ **–ü—Ä–∏–º–µ—Ä Lua-—Å–∫—Ä–∏–ø—Ç–∞ (`scripts/scene1.lua`)**
```lua
function modify_scene(scene)
    if scene.id == 1 then
        scene.text = "You open the door carefully and step inside."
    end
    return scene
end
```
### üîπ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
- **`modify_scene(scene)`** ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∏–∑–º–µ–Ω—è—é—â–∞—è —Å—Ü–µ–Ω—É –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º.
- `scene` ‚Äî —ç—Ç–æ **—Ç–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ —Å—Ü–µ–Ω—ã**.
- –ú–æ–∂–Ω–æ **–∏–∑–º–µ–Ω—è—Ç—å `scene.text`, `scene.background`, `scene.person`**.
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º **–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é —Å—Ü–µ–Ω—É**.

---

## üìå **–°–∏—Å—Ç–µ–º–∞ –≤—ã–±–æ—Ä–æ–≤**
–ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å **–≤—ã–±–æ—Ä—ã**, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `choices`.

### üîπ **–ü—Ä–∏–º–µ—Ä —Å–∏—Å—Ç–µ–º—ã –≤—ã–±–æ—Ä–æ–≤ (Lua)**
```lua
function modify_scene(scene)
    if scene.id == 2 then
        scene.text = "Do you go left or right?"
        scene.choices = {
            { text = "Go left", picked_path = 1 },
            { text = "Go right", picked_path = 2 }
        }
    end
    return scene
end
```
### üîπ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
- **`scene.choices`** ‚Äî –º–∞—Å—Å–∏–≤ —Å –≤—ã–±–æ—Ä–æ–º.
- **–ò–≥—Ä–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç**, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `choices`.
- –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –º–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å **`picked_path`**.

---

## üìå **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –ø–æ—Å–ª–µ —Å—Ü–µ–Ω—ã**
–ö–∞–∂–¥–∞—è —Å—Ü–µ–Ω–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å **`post_scene`**, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

### üîπ **–ü—Ä–∏–º–µ—Ä `post_scene` (Lua)**
```lua
function post_scene(scene)
    print("You have completed this scene!")
end
```
### üîπ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
- **`post_scene(scene)`** –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞.
- –ú–æ–∂–Ω–æ **–∏–∑–º–µ–Ω—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏—è**.
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `post_scene` **–æ–±–Ω—É–ª—è–µ—Ç—Å—è**.

---

## üìå **–ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã**
–ó–∞–ø—É—Å—Ç–∏ —Ñ–∞–π–ª `novell.py`:
```bash
python novell.py
```
**–î–≤–∏–∂–æ–∫ –Ω–∞—á–Ω—ë—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Å—Ü–µ–Ω—ã** –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. –î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ **–Ω–∞–∂–∏–º–∞–π `Enter`**.

---

## üìå **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–≤–∏–∂–∫–∞**
### üîπ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥?**
- **–¢–µ–∫—Å—Ç —Å—Ü–µ–Ω—ã –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ** (`rich.Panel`).
- **–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ ASCII** (`cv2 + numpy`).

### üîπ **–ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è —Å—Ü–µ–Ω—ã?**
- `next_scene()` ‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ü–µ–Ω—É.
- `prev_scene()` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é.
- `custom_scene(id)` ‚Äî –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ü–µ–Ω—É –ø–æ ID.

### üîπ **–ö–∞–∫ Lua –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å Python?**
- `modify_scene(scene)` ‚Äî –∏–∑–º–µ–Ω—è–µ—Ç —Ç–µ–∫—É—â—É—é —Å—Ü–µ–Ω—É.
- `post_scene(scene)` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞.

---

## üìå **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**
üî• –¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å **–ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –Ω–æ–≤–µ–ª–ª—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å Lua-–ª–æ–≥–∏–∫–æ–π**! üöÄ  
- **–î–æ–±–∞–≤–ª—è–π —Å—Ü–µ–Ω—ã (`scenes/*.json`)**
- **–ü–∏—à–∏ —Å–∫—Ä–∏–ø—Ç—ã (`scripts/*.lua`)**
- **–ó–∞–ø—É—Å–∫–∞–π `python novell.py` –∏ –∏–≥—Ä–∞–π!** üéÆ
